<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Vista en vivo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <style>
      html,body,#root{height:100%;margin:0}
      #map{height:100%}
      :root{--main-panel-height:220px}
      .panel{position:absolute;top:12px;left:12px;right:auto;background:rgba(255,255,255,0.75);backdrop-filter:blur(8px);padding:16px;
        border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.1);font-family:sans-serif;z-index:1000;
        display:flex;flex-direction:column;gap:12px;max-width:340px;min-width:320px}
      .panel-title{font-size:16px;font-weight:600;margin:0;color:#2c3e50}
      .panel-section{background:rgba(248,250,252,0.8);padding:12px;border-radius:8px;border:1px solid rgba(226,232,240,0.5)}
      .section-header{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;color:#64748b;margin:0 0 8px 0}
      .control-group{display:flex;flex-direction:column;gap:8px}
      .control-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
      .inline{display:inline-flex;align-items:center;gap:8px}
      .status-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:13px}
      .status-item{display:flex;align-items:center;gap:6px}
      .status-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
      .status-active{background:#10b981}
      .status-inactive{background:#94a3b8}
      .modern-checkbox{width:16px;height:16px;margin-right:8px}
      .modern-input{padding:6px 10px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;width:60px}
      .modern-btn{padding:6px 12px;border:1px solid #d1d5db;border-radius:8px;background:#ffffff;cursor:pointer;font-size:13px;transition:all 0.2s}
      .modern-btn:hover{background:#f8fafc;border-color:#94a3b8;transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,0.08)}
      .modern-btn:active{transform:translateY(0);box-shadow:0 1px 3px rgba(0,0,0,0.08)}
      .modern-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
      .device-info{font-size:12px;color:#64748b;margin-top:4px}
      
      /* Status Pill */
      .panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
      .status-pill-inline{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:9999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.3px}
      .pill-online{background:rgba(16,185,129,0.15);color:#059669;border:1px solid rgba(16,185,129,0.3)}
      .pill-connecting{background:rgba(245,166,35,0.15);color:#d97706;border:1px solid rgba(245,166,35,0.3)}
      .pill-reconnecting{background:rgba(59,130,246,0.15);color:#2563eb;border:1px solid rgba(59,130,246,0.3)}
      .pill-down{background:rgba(239,68,68,0.15);color:#dc2626;border:1px solid rgba(239,68,68,0.3)}
      .pill-dot{width:6px;height:6px;border-radius:50%;background:currentColor}
      @keyframes pillPulse{0%{opacity:.6;transform:scale(.85)}50%{opacity:1;transform:scale(1)}100%{opacity:.6;transform:scale(.85)}}
      .pill-dot.blink{animation:pillPulse 1.4s ease-in-out infinite}
      .pill-dot.blink-fast{animation:pillPulse 0.7s ease-in-out infinite}
      
      /* Device status dots in table */
      .device-status-dot{width:10px;height:10px;border-radius:50%;display:inline-block;flex-shrink:0}
      .status-never{background:#9ca3af}
      .status-online{background:#10b981}
      .status-connecting{background:#f59e0b}
      .status-reconnecting{background:#3b82f6}
      .status-down{background:#ef4444}
      .device-status-dot.blink{animation:pillPulse 1.4s ease-in-out infinite}
      .device-status-dot.blink-fast{animation:pillPulse 0.7s ease-in-out infinite}
      
      /* iOS-style Toggle Switch */
      .toggle-switch{position:relative;display:inline-block;width:42px;height:24px}
      .toggle-switch input{opacity:0;width:0;height:0}
      .toggle-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#cbd5e1;border-radius:24px;transition:all 0.3s ease}
      .toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:white;border-radius:50%;transition:all 0.3s ease;box-shadow:0 2px 4px rgba(0,0,0,0.2)}
      .toggle-switch input:checked + .toggle-slider{background-color:#3b82f6}
      .toggle-switch input:checked + .toggle-slider:before{transform:translateX(18px)}
      .toggle-switch input:disabled + .toggle-slider{opacity:0.5;cursor:not-allowed}
      
      /* iOS-style Checkbox for table */
      .ios-checkbox{position:relative;display:inline-block;width:20px;height:20px;cursor:pointer}
      .ios-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}
      .ios-checkbox-box{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#fff;border:2px solid #d1d5db;border-radius:6px;transition:all 0.2s ease}
      .ios-checkbox input:checked ~ .ios-checkbox-box{background-color:#3b82f6;border-color:#3b82f6}
      .ios-checkbox-box:after{content:"";position:absolute;display:none;left:6px;top:2px;width:5px;height:10px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}
      .ios-checkbox input:checked ~ .ios-checkbox-box:after{display:block}
      .ios-checkbox:hover .ios-checkbox-box{border-color:#94a3b8}
      .ios-checkbox input:checked:hover ~ .ios-checkbox-box{border-color:#2563eb;background-color:#2563eb}
      
      /* iOS-style Toast Notification */
      .toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(100px);background:rgba(40,40,40,0.95);backdrop-filter:blur(20px);color:white;padding:12px 20px;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.3);font-size:15px;font-weight:500;display:flex;align-items:center;gap:10px;z-index:10000;opacity:0;transition:all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);pointer-events:none}
      .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
      .toast-icon{font-size:20px;display:flex;align-items:center}
      .toast-message{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}
      
      /* Mirror Settings Popup */
      .mirror-settings-container{position:relative;display:inline-flex;align-items:center;gap:4px}
      .gear-icon{cursor:pointer;color:#64748b;opacity:0.7;transition:all 0.3s ease;user-select:none;padding:6px;display:flex;align-items:center;justify-content:center;border-radius:8px}
      .gear-icon:hover{opacity:1;transform:rotate(90deg) translateY(-1px);background:rgba(59,130,246,0.1);color:#3b82f6;box-shadow:0 2px 8px rgba(59,130,246,0.15)}
      .gear-icon:active{transform:rotate(90deg) translateY(0)}
      .gear-icon svg{display:block}
      .mirror-settings-popup{position:absolute;bottom:calc(100% + 8px);right:0;background:white;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.15);padding:14px;min-width:220px;z-index:10001;animation:popupSlide 0.2s ease-out}
      .mirror-settings-popup::after{content:'';position:absolute;bottom:-6px;right:20px;width:12px;height:12px;background:white;transform:rotate(45deg)}
      @keyframes popupSlide{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}
      .settings-label{font-size:11px;font-weight:600;color:#64748b;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}
      .settings-options{display:flex;flex-direction:column;gap:6px}
      .settings-option{padding:8px 10px;border-radius:8px;cursor:pointer;font-size:13px;transition:all 0.2s;border:1px solid transparent}
      .settings-option:hover{background:#f1f5f9;transform:translateX(2px)}
      .settings-option:active{transform:translateX(0)}
      .settings-option.active{background:#e0f2fe;border-color:#3b82f6;color:#1e40af;font-weight:600}
      .settings-option-label{font-weight:500}
      .settings-option-desc{font-size:11px;color:#94a3b8;margin-top:2px}
      
      /* Vista en Vivo Panel Slide Up Animation */
      @keyframes slideUpFade{
        from{
          transform:translateX(-50%) translateY(150%);
          opacity:0;
        }
        to{
          transform:translateX(-50%) translateY(0);
          opacity:1;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

```
